# SageMath's LibGAP (`sage_libgap`)

This package is an automatically extracted standalone version of [SageMath's LibGAP](https://github.com/sagemath/sage/tree/develop/src/sage/libs/gap) (originally authored by Volker Braun). It is also inspired by [E. M. Bray's gappy package](https://github.com/embray/gappy) (which was last updated in March 2021).

The goal is to provide a Python interface to GAP using the code from Sage with as little patching as possible. Definitions that cannot be patched are bootstrapped with custom code.

## Installation

Currently only installation from source is supported. You will need

1. A local install of the [GAP System](https://github.com/gap-system/gap#how-to-obtain-gap).
2. Python 3.8+

Before installing `sage_libgap`, you can either add the local install of the `GAP` folder to the system `PATH` variable, or set the `GAP_ROOT` environment variable to point to it. Then, clone this repository, `cd` into it, and run

```
pip install .
```

You can check that the install worked by running

```python
>>> from sage_libgap.libgap import libgap as gap
>>> one = gap(1)
>>> one + one
2
```

## Making changes to SageMath's LibGAP

In case you'd like to change something in Sage's LibGAP, here is how it was created:

1. The source code is generated by the `scripts/extract_sage_libgap.py` script. It takes as argument the path to a local clone of the [`sage`](https://github.com/sagemath/sage) repository. When you run it, it copies the required files from the `sage` source distribution to the `sage_libgap` folder, and then patches them.
2. Some files are either too big to be patched, or the required functionality too small that it can just be redefined by hand. These files are inside the `bootstrap` folder, whose contents are used to initialize the `sage_libgap` folder.

Therefore, if you want to change something, the workflow is:

1. Check if the file you are editing is inside the `bootstrap` folder, and just edit it there (bear in mind that these files are meant to be patched by `extract_sage_libgap.py`, and as such are not expected to work by themselves).
2. Edit the patches applied in the `extract_sage_libgap.py` script. The syntax and application for paths is fairly self-explanatory.

## Troubleshooting

This is still an early release, so problems are expected. This section will be updated as common issues start being identified. Feel free to open an issue in case you run into any problems.

## References

- [SageMath: a free open-source mathematics software system]("https://www.sagemath.org/") by `The SageMath Developers`. Distributed under GPLv2+.
- [gappy: a Python interface to GAP](https://github.com/embray/gappy) by `E. M. Bray`. Distributed under GPLv3+.
